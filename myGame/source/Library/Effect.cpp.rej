diff a/myGame/source/Library/Effect.cpp b/myGame/source/Library/Effect.cpp	(rejected hunks)
@@ -40,15 +40,19 @@
 		ID3D10Blob* compiledShader = nullptr;
 		ID3D10Blob* errorMessages = nullptr;
 		HRESULT hr = D3DCompileFromFile(filename.c_str(), nullptr, nullptr, nullptr, "fx_5_0", shaderFlags, 0, &compiledShader, &errorMessages);
-		if (FAILED(hr))
+		if (errorMessages != nullptr)
 		{
-			char* errorMessage = (errorMessages != nullptr ? (char*)errorMessages->GetBufferPointer() : "D3DX11CompileFromFile() failed");
-			GameException ex(errorMessage, hr);
+			GameException ex((char*)errorMessages->GetBufferPointer(), hr);
 			ReleaseObject(errorMessages);
 
 			throw ex;
 		}
 
+		if (FAILED(hr))
+		{
+			throw GameException("D3DX11CompileFromFile() failed.", hr);
+		}
+
 		hr = D3DX11CreateEffectFromMemory(compiledShader->GetBufferPointer(), compiledShader->GetBufferSize(), NULL, direct3DDevice, effect);
 		if (FAILED(hr))
 		{
